<div class="content">
  <div class="row">
    <div class="col-12">
      <div class="sv-page">
  <div class="sv-header">
    <div>
      <h2 class="sv-title">ผู้ใช้งานระบบ</h2>
      <div class="sv-subtitle">กำหนดสิทธิ์ระดับจังหวัด/อำเภอ/ตำบล/หมู่บ้าน (ตัวอย่างหน้าจอ – ยังไม่ผูก API)</div>
    </div>
    <div class="sv-header-actions">
      <mat-form-field appearance="outline" class="sv-search">
        <mat-label>ค้นหา</mat-label>
        <input matInput [(ngModel)]="q" (ngModelChange)="applyFilter()" />
      </mat-form-field>
      <button mat-flat-button color="primary" (click)="openAdd()">
        <mat-icon>person_add</mat-icon>
        เพิ่มผู้ใช้
      </button>
    </div>
  </div>

  <mat-card class="sv-card">
    <div class="sv-table-wrap">
      <table mat-table [dataSource]="filtered" class="sv-table">
        <ng-container matColumnDef="username">
          <th mat-header-cell *matHeaderCellDef>Username</th>
          <td mat-cell *matCellDef="let r">{{ r.username }}</td>
        </ng-container>

        <ng-container matColumnDef="full_name">
          <th mat-header-cell *matHeaderCellDef>ชื่อ</th>
          <td mat-cell *matCellDef="let r">{{ r.full_name }}</td>
        </ng-container>

        <ng-container matColumnDef="role_level">
          <th mat-header-cell *matHeaderCellDef>ระดับสิทธิ์</th>
          <td mat-cell *matCellDef="let r">{{ r.role_level }}</td>
        </ng-container>

        <ng-container matColumnDef="scope_id">
          <th mat-header-cell *matHeaderCellDef>scope_id</th>
          <td mat-cell *matCellDef="let r">{{ r.scope_id ?? '-' }}</td>
        </ng-container>

        <ng-container matColumnDef="is_active">
          <th mat-header-cell *matHeaderCellDef>สถานะ</th>
          <td mat-cell *matCellDef="let r">
            <span class="sv-pill" [class.ok]="r.is_active" [class.no]="!r.is_active">
              {{ r.is_active ? 'Active' : 'Inactive' }}
            </span>
          </td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef style="width: 160px;">จัดการ</th>
          <td mat-cell *matCellDef="let r" class="sv-actions">
            <button mat-stroked-button color="primary" (click)="openEdit(r)">แก้ไข</button>
            <button mat-stroked-button color="warn" (click)="remove(r)">ลบ</button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="columns"></tr>
        <tr mat-row *matRowDef="let row; columns: columns;"></tr>
      </table>
    </div>
  </mat-card>
      </div>
    </div>
  </div>
</div>
