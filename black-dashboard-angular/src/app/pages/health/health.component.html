<div class="content">
  <div class="row">
    <div class="col-12">
      <div class="sv-page">
  <div class="sv-header">
    <div>
      <h2 class="sv-title">เยี่ยมบ้าน / สุขภาพ</h2>
      <div class="sv-subtitle">บันทึกการเยี่ยมบ้านและประเด็นสุขภาพ (ตัวอย่างหน้าจอ – ยังไม่ผูก API)</div>
    </div>
    <div class="sv-header-actions">
      <mat-form-field appearance="outline" class="sv-search">
        <mat-label>ค้นหา</mat-label>
        <input matInput [(ngModel)]="q" (ngModelChange)="applyFilter()" placeholder="ชื่อ/โรคประจำตัว" />
        <button *ngIf="q" matSuffix mat-icon-button (click)="q=''; applyFilter()">
          <mat-icon>close</mat-icon>
        </button>
      </mat-form-field>

      <button mat-raised-button class="sv-btn" (click)="openAdd()">
        <mat-icon>add</mat-icon>
        เพิ่มรายการ
      </button>
    </div>
  </div>

  <mat-card class="sv-card">
    <div class="table-wrap">
      <table mat-table [dataSource]="filtered" class="mat-elevation-z0" style="width: 100%">
        <ng-container matColumnDef="visit_date">
          <th mat-header-cell *matHeaderCellDef>วันที่</th>
          <td mat-cell *matCellDef="let r">{{ r.visit_date }}</td>
        </ng-container>

        <ng-container matColumnDef="person_name">
          <th mat-header-cell *matHeaderCellDef>ชื่อ-สกุล</th>
          <td mat-cell *matCellDef="let r">{{ r.person_name }}</td>
        </ng-container>

        <ng-container matColumnDef="chronic">
          <th mat-header-cell *matHeaderCellDef>โรค/ภาวะ</th>
          <td mat-cell *matCellDef="let r">{{ r.chronic }}</td>
        </ng-container>

        <ng-container matColumnDef="is_bedridden">
          <th mat-header-cell *matHeaderCellDef>ติดเตียง</th>
          <td mat-cell *matCellDef="let r">{{ r.is_bedridden ? 'ใช่' : '-' }}</td>
        </ng-container>

        <ng-container matColumnDef="note">
          <th mat-header-cell *matHeaderCellDef>หมายเหตุ</th>
          <td mat-cell *matCellDef="let r">{{ r.note }}</td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef style="width: 120px">จัดการ</th>
          <td mat-cell *matCellDef="let r">
            <button mat-icon-button (click)="openEdit(r)" title="แก้ไข"><mat-icon>edit</mat-icon></button>
            <button mat-icon-button (click)="remove(r)" title="ลบ"><mat-icon>delete</mat-icon></button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="cols"></tr>
        <tr mat-row *matRowDef="let row; columns: cols;"></tr>
      </table>
    </div>
  </mat-card>
      </div>
    </div>
  </div>
</div>
