<div class="content">
  <div class="row">
    <div class="col-12">
      <div class="sv-page">
  <div class="sv-header">
    <div>
      <h2 class="sv-title">ประชากร</h2>
      <div class="sv-subtitle">ทะเบียนประชากรในพื้นที่ (ตัวอย่างหน้าจอ – ยังไม่ผูก API)</div>
    </div>
    <div class="sv-header-actions">
      <mat-form-field appearance="outline" class="sv-search">
        <mat-label>ค้นหา</mat-label>
        <input matInput [(ngModel)]="q" (ngModelChange)="applyFilter()" placeholder="ชื่อ / เลขบัตร / บ้าน" />
        <button mat-icon-button matSuffix aria-label="clear" *ngIf="q" (click)="q='';applyFilter()">
          <mat-icon>close</mat-icon>
        </button>
      </mat-form-field>
      <button mat-flat-button color="primary" (click)="openAdd()">
        <mat-icon>person_add</mat-icon>
        เพิ่มประชากร
      </button>
    </div>
  </div>

  <mat-card class="sv-card">
    <div class="sv-table-wrap">
      <table mat-table [dataSource]="filtered" class="sv-table">

        <ng-container matColumnDef="citizen_id">
          <th mat-header-cell *matHeaderCellDef>เลขบัตร</th>
          <td mat-cell *matCellDef="let r">{{ r.citizen_id }}</td>
        </ng-container>

        <ng-container matColumnDef="full_name">
          <th mat-header-cell *matHeaderCellDef>ชื่อ-สกุล</th>
          <td mat-cell *matCellDef="let r"><b>{{ r.full_name }}</b></td>
        </ng-container>

        <ng-container matColumnDef="sex">
          <th mat-header-cell *matHeaderCellDef>เพศ</th>
          <td mat-cell *matCellDef="let r">{{ r.sex }}</td>
        </ng-container>

        <ng-container matColumnDef="birth_date">
          <th mat-header-cell *matHeaderCellDef>วันเกิด</th>
          <td mat-cell *matCellDef="let r">{{ r.birth_date }}</td>
        </ng-container>

        <ng-container matColumnDef="occupation">
          <th mat-header-cell *matHeaderCellDef>อาชีพ</th>
          <td mat-cell *matCellDef="let r">{{ r.occupation }}</td>
        </ng-container>

        <ng-container matColumnDef="house_ref">
          <th mat-header-cell *matHeaderCellDef>บ้าน</th>
          <td mat-cell *matCellDef="let r">{{ r.house_ref }}</td>
        </ng-container>

        <ng-container matColumnDef="area">
          <th mat-header-cell *matHeaderCellDef>พื้นที่</th>
          <td mat-cell *matCellDef="let r">{{ r.village }} / {{ r.tambon }} / {{ r.amphur }}</td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef style="width: 120px;">จัดการ</th>
          <td mat-cell *matCellDef="let r" class="sv-actions">
            <button mat-icon-button (click)="openEdit(r)" aria-label="edit"><mat-icon>edit</mat-icon></button>
            <button mat-icon-button color="warn" (click)="remove(r)" aria-label="delete"><mat-icon>delete</mat-icon></button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="cols"></tr>
        <tr mat-row *matRowDef="let row; columns: cols;"></tr>
      </table>

      <div class="sv-empty" *ngIf="filtered.length === 0">
        ไม่พบข้อมูล
      </div>
    </div>
  </mat-card>
      </div>
    </div>
  </div>
</div>
